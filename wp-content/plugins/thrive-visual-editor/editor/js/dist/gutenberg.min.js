/*! Thrive Architect - 2020-11-17
* http://www.thrivethemes.com/
* Copyright (c) 2020 Thrive Themes */

!function(n){var t=function(){return"undefined"!=typeof wp&&void 0!==wp.blocks},i=function(){var i=n("#editor"),t=n("#thrive-gutenberg-switch").html(),e=n("<div>").append(t),o=e.find("#thrive_preview_button");setTimeout(function(){-1!==t.indexOf("postbox")?(i.find(".editor-post-title").append(e),i.find(".editor-block-list__layout,.block-editor-block-list__layout").hide(),i.find(".editor-post-title__block").css("margin-bottom","0"),i.find(".editor-writing-flow__click-redirect,.block-editor-writing-flow__click-redirect").hide(),i.find(".edit-post-header-toolbar").css("visibility","hidden")):(i.find(".edit-post-header-toolbar").append(o),o.on("click",function(){i.find(".editor-block-list__layout").hide()}),i.find(".edit-post-header-toolbar").css("visibility","visible")),n("#tcb2-show-wp-editor").on("click",function(){var t=i.find(".tcb-enable-editor").closest(".postbox");n.ajax({type:"post",url:ajaxurl,dataType:"json",data:{_nonce:TCB_Post_Edit_Data.admin_nonce,post_id:this.getAttribute("data-id"),action:"tcb_admin_ajax_controller",route:"disable_tcb"}}).done(function(t){}),t.next(".tcb-flags").find("input").prop("disabled",!1),t.remove(),i.find(".editor-block-list__layout").show(),i.find(".edit-post-header-toolbar").append(o),i.find(".edit-post-header-toolbar").css("visibility","visible")}),o.on("click",function(){n.ajax({type:"post",url:ajaxurl,dataType:"json",data:{_nonce:TCB_Post_Edit_Data.admin_nonce,post_id:this.getAttribute("data-id"),action:"tcb_admin_ajax_controller",route:"change_post_status_gutenberg"}})}),n(window).on("storage.tcb",function(t){var i,e=wp.data.select("core/editor").getCurrentPost();try{i=JSON.parse(t.originalEvent.newValue)}catch(t){}i&&i.ID&&"tve_post_options_change"===t.originalEvent.key&&i.ID===Number(e.id)&&window.location.reload()}),wp.data.subscribe(function(){var t=wp.data.select("core/editor");if(t){var i=t.isSavingPost(),e=t.isAutosavingPost();if(i&&!e){var o=JSON.stringify(t.getCurrentPost());window.localStorage.setItem("tve_post_options_change",o)}}})},200)};n(function(){t()&&i(),window.addEventListener("load",function(){n(".tcb-revert").on("click",function(){confirm("Are you sure you want to DELETE all of the content that was created in this landing page and revert to the theme page? \n If you click OK, any custom content you added to the landing page will be deleted.")&&(location.href=location.href+"&tve_revert_theme=1",n("#editor").find(".edit-post-header-toolbar").css("visibility","visible"))})})})}(jQuery);