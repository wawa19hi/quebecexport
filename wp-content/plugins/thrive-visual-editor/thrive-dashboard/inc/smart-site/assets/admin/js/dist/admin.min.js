!function(e){var t={};function i(s){if(t[s])return t[s].exports;var r=t[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(s,r,function(t){return e[t]}.bind(null,r));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=82)}({82:function(e,t,i){e.exports=i(83)},83:function(e,t,i){var s;s=jQuery,_.templateSettings={evaluate:/<#([\s\S]+?)#>/g,interpolate:/<#=([\s\S]+?)#>/g,escape:/<#-([\s\S]+?)#>/g},Backbone.emulateHTTP=!0,s((function(){s.extend(SmartSite,{ss_router:Backbone.Router.extend({$el:s("#tvd-tss-wrapper"),routes:{dashboard:"dashboard",global_fields:"global_fields"},header:null,dashboard_view:null,menu_view:null,sidemenu_view:null,breadcrumbs:{col:null,view:null},set_page:function(e,t,i){this.breadcrumbs.col.reset(),i=i||{},this.breadcrumbs.col.add_page(SmartSite.dash_url,SmartSite.t.Thrive_Dashboard,!0),_.each(i,_.bind((function(e){this.breadcrumbs.col.add_page(e.route,e.label)}),this)),this.breadcrumbs.col.add_page("",t);var r=s("head > title");this.original_title||(this.original_title=r.html()),r.html(t+" &lsaquo; "+this.original_title)},renderHeader:function(){this.header?this.header.setElement(s("#tvd-tss-header")):this.header=new SmartSite.views.Header({el:"#tvd-tss-header"}),this.header.render()},init_breadcrumbs:function(){this.breadcrumbs.col=new SmartSite.models.collections.Breadcrumbs,this.breadcrumbs.view=new SmartSite.views.Breadcrumbs({collection:this.breadcrumbs.col})},renderMenu:function(){this.menu_view=new SmartSite.views.Menu({}),this.$el.find(".tvd-tss-menu").html(this.menu_view.render().$el)},dashboard:function(){this.set_page("","Smart Site",[{route:"dashboard",label:SmartSite.t.Thrive_Dashboard}]),this.renderHeader(),this.renderMenu(),this.dashboard_view&&this.dashboard_view.remove(),this.dashboard_view=new SmartSite.views.Dashboard({collection:SmartSite.groups}),this.$el.find(".tvd-tss-content").html(this.dashboard_view.render().$el),TVE_Dash.materialize(this.$el)},global_fields:function(){this.set_page("","Global Fields",[{route:"global_fields",label:SmartSite.t.SmartSite},{route:"dashboard",label:SmartSite.t.Thrive_Dashboard}]),this.renderHeader(),this.renderMenu(),this.dashboard_view&&this.dashboard_view.remove(),this.dashboard_view=new SmartSite.views.GlobalFields({collection:SmartSite.groups}),this.$el.find(".tvd-tss-content").html(this.dashboard_view.render().$el),TVE_Dash.materialize(this.$el)}}),utils:i(84),models:i(85),views:i(86),modals:i(87)}),SmartSite.groups=new SmartSite.models.collections.Groups(SmartSite.data.groups),SmartSite.router=new SmartSite.ss_router,SmartSite.router.init_breadcrumbs(),Backbone.history.start({hashchange:!0}),Backbone.history.fragment||SmartSite.router.navigate("#global_fields",{trigger:!0})}))},84:function(e,t){var i;jQuery,i={get_field_type_name:function(e){return SmartSite.data.fieldTypes[e]?SmartSite.data.fieldTypes[e].name:""}},e.exports=i},85:function(e,t){var i,s;i=jQuery,(s={collections:{}}).Base=Backbone.Model.extend({idAttribute:"ID",toDeepJSON:function(){var e=i.extend(!0,{},this.attributes);return _.each(_.keys(e),(function(t){_.isUndefined(e[t])||_.isNull(e[t])||!_.isFunction(e[t].toJSON)||(e[t]=e[t].toJSON())})),e},deepClone:function(){return new this.constructor(this.toDeepJSON())},ensureCollectionData:function(e,t){_.each(t,_.bind((function(t,i){return!e[i]||(this.get(i)instanceof t?(this.get(i).reset(e[i]),void(e[i]=this.get(i))):(e[i]=new t(e[i]),!0))}),this))},validation_error:function(e,t){return{field:e,message:t}},sync:function(e,t,i){var s;return(i=i||{}).cache=!1,_.isUndefined(SmartSite.nonce)||_.isNull(SmartSite.nonce)||(s=i.beforeSend,i.beforeSend=function(e){if(e.setRequestHeader("X-WP-Nonce",SmartSite.nonce),s)return s.apply(this,arguments)}),Backbone.sync(e,t,i)}}),s.collections.Base=Backbone.Collection.extend({last:function(){return this.at(this.size()-1)},sync:function(e,t,i){var s;return(i=i||{}).cache=!1,_.isUndefined(SmartSite.nonce)||_.isNull(SmartSite.nonce)||(s=i.beforeSend,i.beforeSend=function(e){if(e.setRequestHeader("X-WP-Nonce",SmartSite.nonce),s)return s.apply(this,arguments)}),Backbone.sync(e,t,i)}}),s.BreadcrumbLink=s.Base.extend({defaults:{ID:"",hash:"",label:"",full_link:!1},initialize:function(e){this.get("ID")||e.label&&this.set("ID",e.label.split(" ").join("").toLowerCase()),this.set("full_link",e.hash.match(/^http/))},get_url:function(){return this.get("full_link")?this.get("hash"):"#"+this.get("hash")}}),s.collections.Breadcrumbs=s.collections.Base.extend({model:s.Base.extend({defaults:{hash:"",label:""}}),add_page:function(e,t){var i=new s.BreadcrumbLink({hash:e,label:t});return this.add(i)}}),s.Field=s.Base.extend({idAttribute:"id",defaults:{group_id:null,name:"",type:null,data:{},icon:"",formated_data:"",is_default:0,opened:!1,created_at:"",updated_at:""},initialize:function(){null===this.get("data")&&this.set({data:{}})},url:function(){var e=SmartSite.routes.fields;return(this.get("id")||0===this.get("id"))&&(e+="/"+this.get("id")),e},validate:function(e,t){this.errors=[],e.name||this.errors.push(this.validation_error("name",SmartSite.t.InvalidName)),this.validateGoupId(e),this.validateType(e);var i="validate"+TVE_Dash.upperFirst(SmartSite.utils.get_field_type_name(parseInt(e.type)))+"Field";if("function"==typeof this[i]&&this[i].call(this,e.data),this.errors.length)return this.errors},validateGoupId:function(e){null===e.group_id&&this.errors.push(this.validation_error("group_id",SmartSite.t.InvalidInput))},validateType:function(e){null===e.type&&this.errors.push(this.validation_error("type",SmartSite.t.InvalidInput))},validateTextField:function(e){e.text||this.errors.push(this.validation_error("data_text",SmartSite.t.InvalidText))},validateAddressField:function(e){e.address1||this.errors.push(this.validation_error("data_address1",SmartSite.t.InvalidAddress))},validatePhoneField:function(e){e.phone||this.errors.push(this.validation_error("data_phone",SmartSite.t.InvalidPhone))},validateEmailField:function(e){e.email?/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,})+$/.test(e.email)||this.errors.push(this.validation_error("data_email",SmartSite.t.InvalidEmail)):this.errors.push(this.validation_error("data_email",SmartSite.t.NoEmail))},validateLinkField:function(e){e.text||this.errors.push(this.validation_error("data_text",SmartSite.t.InvalidText)),e.url?(/^(f|ht)tps?:\/\//i.test(e.url)||(e.url="https://"+e.url),new RegExp("^((ft|htt)ps?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%@_.~+&:]*)*(\\?[;&a-z\\d%@_.,~+&:=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e.url)||this.errors.push(this.validation_error("data_url",SmartSite.t.InvalidURL))):this.errors.push(this.validation_error("data_url",SmartSite.t.NoURL))},validateLocationField:function(e){e.location||this.errors.push(this.validation_error("data_location",SmartSite.t.InvalidLocation))}}),s.collections.Fields=s.collections.Base.extend({model:s.Field}),s.FieldType=s.Base.extend({}),s.Group=s.Base.extend({idAttribute:"id",defaults:{name:"",is_default:0,created_at:"",updated_at:""},initialize:function(){this.set({fields:new s.collections.Fields(this.get("fields"))})},url:function(){var e=SmartSite.routes.groups;return(this.get("id")||0===this.get("id"))&&(e+="/"+this.get("id")),e},validate:function(e,t){var i=[];if(e.name||i.push(this.validation_error("name",SmartSite.t.InvalidName)),i.length)return i}}),s.collections.Groups=s.collections.Base.extend({model:s.Group}),e.exports=s},86:function(e,t){var i,s;i=jQuery,s={},Backbone.View.prototype.tvd_clear_errors=function(){return this.$(".tvd-invalid").removeClass("tvd-invalid"),this.$("select").trigger("tvdclear"),this},Backbone.View.prototype.tvd_show_errors=function(e){if(e=e||this.model){var t=e instanceof Backbone.Model?e.validationError:e,s=this,r=i();return i.isArray(t)?_.each(t,(function(e){a(e)})):a(t),this.scroll_first_error(r.first()),this}function a(e){if("string"==typeof e)return TVE_Dash.err(e);r=r.add(s.$("[data-field="+e.field+"]").addClass("tvd-invalid").each((function(){var t=i(this);t.is("select")?t.trigger("tvderror",e.message):t.next("label").attr("data-error",e.message)})))}},Backbone.View.prototype.scroll_first_error=function(e){if(!(this instanceof TVE_Dash.views.Modal&&e.length))return this;var t=e.offset().top,i=this.$_content.offset().top,s=this.$_content.scrollTop(),r=this.$_content.outerHeight();if(t>=i&&t<r+i-50)return this;this.$_content.animate({scrollTop:s+t-i-40},200,"swing")},s.Base=Backbone.View.extend({render:function(){return this},modal:function(e,t){return TVE_Dash.modal(e,t)},bind_zclip:function(){TVE_Dash.bindZClip(this.$("a.tvd-copy-to-clipboard"));var e=this.$(".tva-sendowl-search");setTimeout((function(){e.each((function(){var e=i(this),t=e.prev().on("click",(function(e){this.select(),e.preventDefault(),e.stopPropagation()})),s=e.attr("data-tvd-btn-color-class")||"tva-copied";try{e.zclip({path:TVE_Dash_Const.dash_url+"/js/util/jquery.zclip.1.1.1/ZeroClipboard.swf",copy:function(){return jQuery(this).prev().val()},afterCopy:function(){var e=jQuery(this);t.select(),e.removeClass(s).addClass("tva-copied"),setTimeout((function(){e.removeClass("tva-copied")}),2e3)}})}catch(e){console.error&&console.error("Error embedding zclip - most likely another plugin is messing this up")&&console.error(e)}}))}),200)}}),s.Header=s.Base.extend({template:TVE_Dash.tpl("header"),render:function(){return this.$el.html(this.template({})),this}}),s.Menu=s.Base.extend({template:TVE_Dash.tpl("menu"),render:function(){return this.$el.html(this.template({page:Backbone.history.getFragment()})),this}}),s.Breadcrumbs=s.Base.extend({el:i("#tvd-tss-breadcrumbs-wrapper")[0],template:TVE_Dash.tpl("breadcrumbs"),initialize:function(){this.$title=i("head > title"),this.original_title=this.$title.html(),this.listenTo(this.collection,"change",this.render),this.listenTo(this.collection,"add",this.render)},render:function(){return this.$el.empty().html(this.template({links:this.collection})),this}}),s.Dashboard=s.Base.extend({template:TVE_Dash.tpl("dashboard"),render:function(){return this.$el.html(this.template({})),this}}),s.GlobalFields=s.Base.extend({template:TVE_Dash.tpl("global_fields"),events:{"click .tvd-tss-add-new-field":"addField"},initialize:function(){this.listenTo(this.collection,"add",this.render),this.listenTo(this.collection,"remove",this.render)},render:function(){return this.$el.html(this.template({})),this.renderGroups(),this},renderGroups:function(){this.collection.each(this.renderGroup,this),TVE_Dash.materialize(this.$el)},renderGroup:function(e){var t=new s.Group({model:e,collection:this.collection}).render().$el;this.$(".tvd-tss-groups-wrapper").append(t)},addField:function(){this.modal(SmartSite.modals.EditFieldModal,{collection:this.collection,group:new SmartSite.models.Group,model:new SmartSite.models.Field,"max-width":"60%",width:"800px"})}}),s.SideMenu=s.Base.extend({template:TVE_Dash.tpl("side-menu"),render:function(){return this.$el.html(this.template({page:Backbone.history.getFragment()})),this}}),s.Group=s.Base.extend({template:TVE_Dash.tpl("global-fields/group"),tagName:"li",className:"tvd-tss-group-item tvd-active",events:{"click .tvd-tss-add-field":"addField","click .tvd-tss-delete-group":"deleteGroup","click .tvd-tss-edit-group":"editGroup"},initialize:function(){Number(this.model.get("is_default"))&&this.$el.addClass("tvd-tss-group-item-default "),this.listenTo(this.model.get("fields"),"add",this.render),this.listenTo(this.model.get("fields"),"remove",this.render),this.model.on("render_groups",this.render,this)},render:function(){return this.$el.html(this.template({model:this.model})),this.renderFields(),this},renderFields:function(){0===this.model.get("fields").length?this.$("ul.tvd-tss-fields-wrapper").html('<p class="tvd-tss-placeholder">'+SmartSite.t.NoFields+"</p>"):this.model.get("fields").each(this.renderField,this)},renderField:function(e){var t=new s.Field({model:e,collection:this.model.get("fields"),group:this.model});this.$("ul.tvd-tss-fields-wrapper").append(t.render().$el)},addField:function(){var e=new SmartSite.models.Field({group_id:this.model.get("id")});this.modal(SmartSite.modals.EditFieldModal,{model:e,collection:this.collection,group:this.model,"max-width":"60%",width:"800px"})},deleteGroup:function(){this.modal(SmartSite.modals.DeleteModal,{model:this.model,collection:this.collection,"max-width":"60%",width:"800px"})},editGroup:function(){this.modal(SmartSite.modals.EditGroupModal,{model:this.model,collection:this.collection,"max-width":"60%",width:"800px"})}}),s.AddGroupField=s.Base.extend({template:TVE_Dash.tpl("global-fields/add-group-field"),className:"tvd-row",render:function(){return this.$el.html(this.template({})),this}}),s.AddMore=s.Base.extend({template:TVE_Dash.tpl("global-fields/add-more"),render:function(){return this.$el.html(this.template({})),this}}),s.Field=s.Base.extend({template:TVE_Dash.tpl("global-fields/field"),tagName:"li",events:{"click .tvd-tss-delete-field":"deleteField","click .tvd-tss-edit-field":"editField"},initialize:function(e){this.group=e.group,this.model.on("render_field",this.render,this)},render:function(){return this.$el.closest(".tvd-tss-fields-content").find(".tve-tss-just-added").removeClass("tve-tss-just-added"),this.$el.html(this.template({model:this.model})),this},deleteField:function(){this.modal(SmartSite.modals.DeleteModal,{model:this.model,collection:this.collection,"max-width":"60%",width:"800px"})},editField:function(){this.modal(SmartSite.modals.EditFieldModal,{model:this.model,collection:SmartSite.groups,group:this.group,view:this,"max-width":"60%",width:"800px",edit:!0})}}),s.FieldTextOptions=s.Base.extend({template:TVE_Dash.tpl("global-fields/text-options"),render:function(){return this.$el.html(this.template({model:this.model})),this.model.get("name")||this.$("input").val(""),this}}),s.FieldAddressOptions=s.FieldTextOptions.extend({template:TVE_Dash.tpl("global-fields/address-options")}),s.FieldPhoneOptions=s.FieldTextOptions.extend({template:TVE_Dash.tpl("global-fields/phone-options")}),s.FieldEmailOptions=s.FieldTextOptions.extend({template:TVE_Dash.tpl("global-fields/email-options")}),s.FieldLinkOptions=s.FieldTextOptions.extend({template:TVE_Dash.tpl("global-fields/link-options")}),s.GroupItem=s.Base.extend({template:TVE_Dash.tpl("global-fields/modal-group-item"),className:"tvd-global-fields-group",render:function(){return this.$el.html(this.template({model:this.model})),this}}),s.FieldTypeItem=s.Base.extend({template:TVE_Dash.tpl("global-fields/modal-type-item"),className:"tvd-global-fields-type",render:function(){return this.$el.html(this.template({model:this.model})),this}}),s.FieldLocationOptions=s.FieldTextOptions.extend({template:TVE_Dash.tpl("global-fields/location-options"),events:{"change .input-change":"setInputData"},render:function(){return this.$el.html(this.template({model:this.model})),this.setInputData(),this},setInputData:function(){var e="https://maps.google.com/maps?q="+encodeURI(this.model.get("data").location?this.model.get("data").location:"New York")+"&t=m&z=10&output=embed&iwloc=near";this.$("#tvd-tss-google-map").html('<iframe frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="'+e+'"></iframe>')}}),e.exports=s},87:function(e,t){var i,s;i=jQuery,(s={}).EditFieldModal=TVE_Dash.views.Modal.extend({template:TVE_Dash.tpl("global-fields/modals/field"),className:"tvd-modal tss-modal",events:{"click .tvd-global-field-group-list":"selectGroup","click #tvd-tss-group-name":"showDropdown","click .tvd-add-new-group":"addNewGroup","click #tvd-save-new-group":"saveNewGroup","keypress #tvd-add-group":"inputGroupName","click .tvd-field-type-option":"selectType","click #tvd-tss-field-type":"showTypeDropdown","input .input-change":"setInputData","click .tvd-tss-save-field":"save"},afterRender:function(){this.renderGroupList(),this.renderFieldTypeList(),this.model.get("type")&&this.renderByType();var e=this;setTimeout((function(){e.$("#tvd-tss-save-field").focus()})),i("body").on("click",(function(t){e.$(".tvd-complex-dropdown-content").each((function(){var e=i(this),s=i(this).siblings(".tvd-input-field").find(".tvd-complex-dropdown-trigger");if(0===s.length)return!0;e.is(t.target)||0!==e.has(t.target).length||s.is(t.target)||e.addClass("tvd-hide")}))}))},renderFieldTypeList:function(){SmartSite.data.fieldTypes.forEach(this.renderFieldType,this)},renderFieldType:function(e){var t=new SmartSite.views.FieldTypeItem({model:new SmartSite.models.FieldType(e)});this.$(".tvd-global-field-type-list").append(t.render().$el)},renderGroupList:function(){SmartSite.groups.each(this.renderGroup,this)},renderGroup:function(e){var t=new SmartSite.views.GroupItem({model:e,collection:SmartSite.groups}).render().$el;return this.$(".tvd-global-field-group-list").append(t),t},selectType:function(e){this.model.set({data:{}}),this.model.set({type:e.currentTarget.dataset.id}),this.$("#tvd-tss-field-type").html(e.currentTarget.innerHTML).removeClass("tvd-invalid").addClass("tvd-value-selected"),this.hideTypeDropdown(),this.renderByType()},renderByType:function(){var e=SmartSite.utils.get_field_type_name(parseInt(this.model.get("type")));SmartSite.views["Field"+TVE_Dash.upperFirst(e)+"Options"]&&(new(SmartSite.views["Field"+TVE_Dash.upperFirst(e)+"Options"])({model:this.model,el:this.$(".tvd-tss-field-data-wrapper")[0]}).render(),TVE_Dash.materialize(this.$el))},showTypeDropdown:function(){this.$(".tvd-select-type-dropdown").toggleClass("tvd-hide")},hideTypeDropdown:function(){this.$(".tvd-select-type-dropdown").addClass("tvd-hide")},setInputData:function(e){this.tvd_clear_errors();var t=i(e.currentTarget).attr("data-field").split("_");this.model.get("data")||this.model.set({data:{}}),1===t.length?this.model.set(t[0],e.currentTarget.value):t.length>1&&(this.model.get(t[0])[t[1]]=e.currentTarget.value)},inputGroupName:function(e){13===e.keyCode&&this.saveNewGroup(),this.tvd_clear_errors()},saveNewGroup:function(){if(this.saving_group)return!1;var e,t=this.$("#tvd-add-group").val(),i=new SmartSite.models.Group({name:t}),s=this;if(!i.isValid())return this.tvd_show_errors(i);this.saving_group=!0,TVE_Dash.showLoader(),(e=i.save())&&(e.done((function(e,t,r){i.set("fields",new SmartSite.models.collections.Fields),s.collection.add(i),TVE_Dash.success(SmartSite.t.GroupSaved),s.renderGroup(i).find(".tvd-group-option").click(),s.hideAddGroup()})),e.error((function(e){var t=JSON.parse(e.responseText);TVE_Dash.err(t.message)})),e.always((function(){s.saving_group=!1,TVE_Dash.hideLoader()})))},addNewGroup:function(){this.showAddGroup()},showAddGroup:function(){this.$("#tvd-input-new-group").removeClass("tvd-hide"),this.$("#tvd-add-new-group").addClass("tvd-hide"),this.$("#tvd-add-group").focus()},hideAddGroup:function(){this.$("#tvd-input-new-group").addClass("tvd-hide"),this.$("#tvd-add-new-group").removeClass("tvd-hide"),this.$(".tvd-select-group-dropdown").addClass("tvd-hide"),this.$("#tvd-add-group").val("")},showDropdown:function(){this.$(".tvd-select-group-dropdown").toggleClass("tvd-hide")},hideDropdown:function(){this.$(".tvd-select-group-dropdown").addClass("tvd-hide")},selectGroup:function(e){var t=i(e.target);t.hasClass("tvd-group-option")||(t=t.closest(".tvd-group-option"));var s=this.collection.findWhere({id:t.attr("data-id")});s&&(this.$("#tvd-tss-group-name").html(s.get("name")).removeClass("tvd-invalid").addClass("tvd-value-selected"),this.model.get("group_id")!=s.get("id")&&(this.groupChange=!0),this.model.set({group_id:s.get("id")}),this.hideDropdown())},save:function(){if(this.$("#tvd-add-group").is(":visible")||this.saving)return!1;if(this.tvd_clear_errors(),!this.model.isValid())return this.tvd_show_errors(this.model);this.saving=!0;var e=this,t=this.model.save();this.close(),t&&(TVE_Dash.showLoader(!0),t.done((function(t,i,s){var r=e.collection.findWhere({id:e.model.get("group_id")});r&&r.get("fields").add(e.model),e.groupChange&&e.view&&e.view.$el.remove(),e.model.set("just_added",!0),e.model.trigger("render_field"),TVE_Dash.success(SmartSite.t.FieldSaved)})),t.error((function(e){var t=JSON.parse(e.responseText);TVE_Dash.err(t.message)})),t.always((function(){TVE_Dash.hideLoader(),e.saving=!1})))}}),s.EditGroupModal=TVE_Dash.views.Modal.extend({template:TVE_Dash.tpl("global-fields/modals/edit-group"),className:"tvd-modal tss-modal tss-edit-modal",events:{"input #tvd-tss-group-name":"setName","click .tvd-modal-submit":"save","click .tvd-modal-close":"cancelChanges"},afterInitialize:function(){this.old_name=this.model.get("name")},cancelChanges:function(){this.model.set("name",this.old_name)},setName:function(e){this.model.set({name:e.currentTarget.value})},save:function(){if(this.tvd_clear_errors(),!this.model.isValid())return this.tvd_show_errors(this.model);this.saving=!0,TVE_Dash.showLoader();var e=this.model.get("id"),t=this.model.save(),i=this;t&&(t.done((function(t,s,r){i.model.set({fields:new SmartSite.models.collections.Fields(i.model.get("fields"))}),e?i.model.trigger("render_groups"):i.collection.add(i.model),i.close(),TVE_Dash.success(SmartSite.t.GroupSaved)})),t.error((function(e){var t=JSON.parse(e.responseText);TVE_Dash.err(t.message)})),t.always((function(){TVE_Dash.hideLoader(),i.saving=!1})))}}),s.DeleteModal=TVE_Dash.views.Modal.extend({template:TVE_Dash.tpl("global-fields/modals/delete"),className:"tvd-modal tss-modal",events:{"click .tvd-delete-item":"deleteItem"},afterInitialize:function(e){this.$el.addClass("tvd-red");var t=this;_.defer((function(){t.$(".tvd-delete-item").focus()}))},deleteItem:function(e){var t=this;if(this.saving)return!1;this.saving=!0,TVE_Dash.showLoader();var i=this.model.destroy();i&&(i.done((function(e,i,s){TVE_Dash.success(t.model.get("name")+" "+SmartSite.t.ItemDeleted)})),i.error((function(e){var t=JSON.parse(e.responseText);TVE_Dash.err(t.message)})),i.always((function(){TVE_Dash.hideLoader(),t.close(),t.saving=!1})))}}),e.exports=s}});